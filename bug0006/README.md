# Bug 0005

- date reported: 2024-05-06
- compiler: ifx 2024.1.0
- bug report URL: <https://community.intel.com/t5/Intel-Fortran-Compiler/Increasing-the-size-of-the-interface-contains-stack/m-p/1595451#M172075>
- status: reported
- action to complete when fixed: Use larger units modules.

## Bug report message

I've attached a zip file containing a reproducer. Included are 3 different versions of the module of varying sizes:

- pdim_12.f90: 12 types, 170 functions (compiles both the module and program)
- pdim_30.f90: 30 types, 837 functions (fails to compile the program, but compiles the module)
- pdim_50.f90: 50 types, 2205 functions (fails to compile the program, but compiles the module; included in case pdim_30.f90 compiles fine on you all's end as this probably won't compile)

Here's a command line log showing what I see:

```
$ ifx --version
ifx (IFX) 2024.1.0 20240308
Copyright (C) 1985-2024 Intel Corporation. All rights reserved.

$ uname -a
Linux trident 5.15.0-105-generic #115~20.04.1-Ubuntu SMP Mon Apr 15 17:33:04 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux
$ ls
pdim_12.f90  pdim_30.f90  pdim_50.f90  test_pdim_types.f90
$ time ifx pdim_12.f90 test_pdim_types.f90 

real    0m0.499s
user    0m0.386s
sys     0m0.113s
$ ./a.out 
  0.000000000000000E+000
   2.00000000000000     
  -1.50000000000000     
  0.500000000000000     
   2.00000000000000     
   3.00000000000000     
   16.0000000000000     
$ rm a.out pdim_types.mod 
removed 'a.out'
removed 'pdim_types.mod'
$ time ifx pdim_30.f90 test_pdim_types.f90 
test_pdim_types.f90(18): error #6618: The INTERFACE/CONTAINS stack is full. This means that modules are being 'used' in a circular way.
x%v = 1.0_WP
^
compilation aborted for test_pdim_types.f90 (code 1)

real    0m2.346s
user    0m2.119s
sys     0m0.227s
1 trident$ rm a.out pdim_types.mod 
rm: cannot remove 'a.out': No such file or directory
removed 'pdim_types.mod'
1 trident$ time ifx pdim_50.f90 test_pdim_types.f90 
test_pdim_types.f90(18): error #6618: The INTERFACE/CONTAINS stack is full. This means that modules are being 'used' in a circular way.
x%v = 1.0_WP
^
compilation aborted for test_pdim_types.f90 (code 1)

real    0m15.114s
user    0m14.627s
sys     0m0.482s
```

For comparison, gfortran compiles all of these fine, and fast too.

To be clear, all of these modules are generated by another Fortran program. As far as I'm aware, the generated modules are valid Fortran, though the generated modules are unusually large. So I am not surprised to run into issues compiling and maybe even run into some hard-coded compiler limits. I'm not sure there is a bug in ifx, but please take a look and let me know. If my code is doing anything wrong, let me know too. If it might help, I can explain what I'm trying to do here as well.

(Also: Trying `-no-ipo` did not help here.)
